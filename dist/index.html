<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>PDF Viewer Example</title>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
        <style>
            
            body {
                margin: 0;
                padding: 0;
                font-family: 'Roboto', sans-serif;
            }

            #pdfViewer {
                width: 100%;
                height: 100%;
                position: absolute;
                border: 1px solid red;
                width: calc(100% - 40px);
                height: calc(100% - 40px);
                margin: 20px;
                overflow: auto;
            }
            
            #pdfViewer .page {
                margin: 0 auto;
            }

            #app {
                display: flex;
                flex-direction: column;
                height: 100vh;
                width: 100vw;
            }

            .mainViewer {
                flex: 1;
                display: flex;
                flex-direction: column;
                position: relative;
            }

            .uiControllers {
                flex: 0 0 80px;
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: center;
                border: 1px solid blue;
                margin: 0 20px;
            }


        </style>
        <link rel="stylesheet" href="pdf_viewer.css" />

        <script src="pdf.js"></script>
        <script src="pdf_viewer.js"></script>
        <script>
            var _debounce = function (ms, fn) {
                var timer;
                return function () {
                    clearTimeout(timer);
                    var args = Array.prototype.slice.call(arguments);
                    args.unshift(this);
                    timer = setTimeout(fn.bind.apply(fn, args), ms);
                };
            };

            class PdfViewerApp {
                PDFViewer = window.rtPDFViewer;
                containerId = null;

                options = {};
                zoomScale = 0;

                constructor(options) {
                    this.options = options;
                    this.containerId = options.containerId;
                    this.initPDFViewer();
                }

                render = () => {
                    this.PDFViewer.eventBus.on('resize', (val) => {
                        console.log('resize', val);
                    });
                    this.PDFViewer.eventBus.on('pagesinit', (val) => {
                        console.log('pagesinit', val);
                    });
                };

                initPDFViewer() {
                    this.PDFViewer.initialize(
                        Object.assign(
                            {
                                autoResize: true,
                                removePageBorders: true,
                                scrollable: true,
                                containerId: this.containerId,
                                currentScaleValue: 'page-fit',
                                cMapUrl: '/pdf-js/cmaps/',
                                cMapPacked: true,
                                workerSrc: './pdf.worker.js'
                            },
                            this.options
                        )
                    );

                    var self = this;

                    this.PDFViewer.open(this.options.pdfUrl).then(this.render);
                }
            }

            var app, ui;

            class UI {
                constructor(app){
                    this.pdfViewer = app.PDFViewer;
                    this.init();
                }

                init(){}

                zoomIn(){
                    this.pdfViewer.zoomIn(1);
                }
                zoomOut(){
                    this.pdfViewer.zoomOut(1);
                }
            }

            window.onload = function () {
                app = new PdfViewerApp({
                    pdfUrl: './example.pdf',
                    containerId: 'pdfViewer'
                });

                ui = new UI(app);
            };
            
        </script>
    </head>

    <body>
        <div id="app">
            <div class="mainViewer">
                <div id="pdfViewer">
                    <div class="viewer"></div>
                </div>
            </div>
            <div class="uiControllers">
                <button class="btn" onclick="ui.zoomOut()">-</button>
                <button class="btn" onclick="ui.zoomIn()">+</button>
            </div>
        </div>
    </body>
</html>
